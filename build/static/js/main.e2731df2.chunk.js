(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),o=n.n(u),c=n(2),l=n(3),i=n.n(l),m="api/persons",s=function(){return i.a.get(m).then((function(e){return e.data}))},f=function(e){return i.a.post(m,e).then((function(e){return e.data}))},d=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var t=e.persons,n=e.numberFilter,a=e.setPersons;return r.a.createElement("div",null,function(){var e=t;return(e=e.filter((function(e){return-1!==e.name.indexOf(n)}))).map((function(e,n){return r.a.createElement("div",{key:n},r.a.createElement("div",null,"Name: ",e.name),r.a.createElement("div",null,"Number: ",e.number," "),r.a.createElement("button",{onClick:function(){return n=e.id,void(window.confirm("Do you really want to delete this person")&&b(n).then((function(e){var r=t.filter((function(e){return n!==e.id}));a(r)})));var n}},"delete"))}))}())},h=n(14),p=function(e){var t=e.persons,n=e.setPersons,u=e.setNotification,o=Object(a.useState)(""),l=Object(c.a)(o,2),i=l[0],m=l[1],s=Object(a.useState)(""),b=Object(c.a)(s,2),v=b[0],p=b[1],E=function(e,t){u([e,t]),setTimeout((function(){u([null,null])}),5e3)};return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={name:i,number:v};if(-1!==t.map((function(e){return e.name})).indexOf(a.name)){if(window.confirm("".concat(a.name," is already added, do you want to update their number?"))){var r=t.find((function(e){return e.name===a.name})),u=r.id,o=Object(h.a)({},r,{number:a.number});d(u,o).then((function(e){var r=t.map((function(t){return t.id!==u?t:e}));n(r),E("Note '".concat(a.name,"' was updated on the server"),"notify")})).catch((function(){E("Sorry that person has already been removed from the server","error")}))}}else f(a).then((function(e){n(t.concat(e)),E("Note '".concat(e.name,"' was added to the server"),"notify")})).catch((function(e){console.log(e.response.data),E(e.response.data.error,"error")}));m(""),p("")}},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:i,onChange:function(e){m(e.target.value)}})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:v,onChange:function(e){p(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"save"))))},E=function(e){var t=e.numberFilter,n=e.setNumberFilter;return r.a.createElement("div",null,r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},O=(n(37),function(e){var t=e.message,n=t[0],a=t[1];return null===n?null:r.a.createElement("div",{className:a},n)}),j=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)(""),l=Object(c.a)(o,2),i=l[0],m=l[1],f=Object(a.useState)([null,null]),d=Object(c.a)(f,2),b=d[0],h=d[1];return Object(a.useEffect)((function(){s().then((function(e){u(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(O,{message:b}),r.a.createElement("h1",null,"Phonebook"),r.a.createElement("h2",null,"Add New"),r.a.createElement(p,{persons:n,setPersons:u,setNotification:h}),r.a.createElement("h2",null,"Filter"),r.a.createElement(E,{numberFilter:i,setNumberFilter:m}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{persons:n,numberFilter:i,setPersons:u}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e2731df2.chunk.js.map